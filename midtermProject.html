<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Soccer Match Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F2F3FF;
      padding: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
    }
    .upcoming {
      background-color: #f0f8ff;
    }
    .ongoing {
      background-color: #d4edda;
    }
    .completed {
      background-color: #e2e3e5;
      color: #555;
    }
  </style>

  <script>
    // checks that html page has loaded
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("matchForm");
      form.addEventListener("submit", function(event) {
        event.preventDefault();
        AddMatch();
      });

      // function starts countdowns for existing dates
      upcomingMatchesCountdown();
    });

    function AddMatch() { // creates new rows with new match dates
      //input values
      const teamA = document.getElementById("teamA").value;
      const teamB = document.getElementById("teamB").value;
      const matchTime = document.getElementById("matchTime").value; 

      // refers to the table body
      const tableBody = document.getElementById("matchTable").getElementsByTagName("tbody")[0];

      // new row is created for upcoming match
      const newRow = document.createElement("tr");
      newRow.className = "upcoming";

      // new row content
      const teamsCell = newRow.insertCell(0);
      const timeCell = newRow.insertCell(1);
      const countdownCell = newRow.insertCell(2);
      const statusCell = newRow.insertCell(3);

      // new row format for team names and dates
      teamsCell.textContent = `${teamA} vs ${teamB}`;

      // new row format for match dates
      const dates = new Date(matchTime); // takes date input from form
      timeCell.textContent = dates.toLocaleString('en-US', { // creates date format using "dates" input
          month: 'long', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric'
        });
      statusCell.textContent = "Upcoming"; // content inside status cell

      // ID for each countdown cell so that multiple countdowns can run at the same time
      const countdownId = "countdown_" + Date.now();
      countdownCell.id = countdownId;

      // function that starts countdowns with its attributes
      startCountdown(dates, countdownId, newRow, statusCell);

      // makes sure new upcoming matches are added above "completed" matches
      const rows = Array.from(tableBody.rows);
      let inserted = false;
      for (let r of rows) {
        if (r.classList.contains("completed")) {
          tableBody.insertBefore(newRow, r);
          inserted = true;
          break;
        }
      }

      // clears inputs after new match is added
      document.getElementById("teamA").value = "";
      document.getElementById("teamB").value = "";
      document.getElementById("matchTime").value = "";
    }

    // function that starts/ends countdowns
    function startCountdown(targetDate, countdownId, row, statusCell) {
      const countDownTime = targetDate.getTime();

      const interval = setInterval(() => {
        // calculating time remaining
        const now = new Date().getTime();
        const timeLeft = countDownTime - now;

        // when countdown reaches 0, row changes to from "Upcoming" to "Match Started" and "Ongoing"
        if (timeLeft <= 0) {
          clearInterval(interval);
          document.getElementById(countdownId).innerHTML = "Match Started";
          row.classList.remove("upcoming");
          row.classList.add("ongoing");
          statusCell.textContent = "Ongoing";

          return;
        }

        // time calculated in days, hours, mins, secs
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        // countdown display format
        document.getElementById(countdownId).innerHTML =
          `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }, 1000);
    }

    // modifies "kickoff" time string so that it can be processed properly
    function kickoffString(str) {
      str = str.replace(/–/g, ':').trim();
      str = str.replace(/[:]/, ' ');
      return new Date(str);
    }

    // identifies which rows are "upcoming"
    function upcomingMatchesCountdown() {
      const tableBody = document.getElementById("matchTable").getElementsByTagName("tbody")[0];
      const rows = tableBody.getElementsByTagName("tr");

      for (let row of rows) { // loops inside table rows
        if (row.classList.contains("upcoming")) { // only "upcoming" matches
          const timeCell = row.cells[1];
          const countdownCell = row.cells[2];
          const statusCell = row.cells[3];

          // creates ID for each cell to know where to display time
          const countdownId = "countdown_" + Math.floor(Math.random() * 100000);
          countdownCell.id = countdownId;

          const dates = kickoffString(timeCell.textContent); // converts "kickoff" to a readable string
          startCountdown(dates, countdownId, row, statusCell); // starts countdown
        }
      }
    }
  </script>
</head>
  
<body>
  <!-- HEADER SECTION: shows small logo next to the title -->
   <header>
<h1>
   <img src="images/placeholder1.png" 
   alt="Logo" 
   style="width: 30px; vertical-align:middle;"> 
  Soccer Match Tracker
</h1>
  </header>

  <form id="matchForm">
    <input type="text" id="teamA" placeholder="Team A" required>
    <input type="text" id="teamB" placeholder="Team B" required>
    <input type="datetime-local" id="matchTime" required>
    <button type="submit">Add Match</button>
  </form>

  <table id="matchTable">
  <thead>
    <tr>
      <th>Teams</th>
      <th>Kickoff</th>
      <th>Countdown</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr class="ongoing">
      <td>Team3 vs Team4</td>
      <td>October 28, 2025 – 11:00 PM</td>
      <td>Match Started</td>
      <td>Ongoing</td>
    </tr>
    <tr class="upcoming">
      <td>Team1 vs Team2</td>
      <td>November 20, 2025 – 3:00 PM</td>
      <td></td>
      <td>Upcoming</td>
    </tr>
    <tr class="upcoming">
      <td>Team7 vs Team8</td>
      <td>November 22, 2025 – 6:30 PM</td>
      <td></td>
      <td>Upcoming</td>
    </tr>
    <tr class="completed">
      <td>Team5 vs Team6</td>
      <td>October 10, 2025 – 2:00 PM</td>
      <td>Completed</td>
      <td>Completed</td>
    </tr>
    <tr class="completed">
      <td>Team9 vs Team10</td>
      <td>October 5, 2025 – 1:00 PM</td>
      <td>Completed</td>
      <td>Completed</td>
    </tr>
  </tbody>
</table>

<style>
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-family: Arial, sans-serif;
  }
  th, td {
    padding: 12px;
    border: 1px solid #ccc;
    text-align: center;
  }
  .upcoming {
    background-color: #cce5ff; /* bright blue */
    color: #003366;
    font-weight: bold;
  }
  .ongoing {
    background-color: #d4edda; /* bright green */
    color: #155724;
    font-weight: bold;
  }
  .completed {
    background-color: #f8f9fa; /* light grey */
    color: #6c757d;
    font-style: italic;
  }
</style>

</html>
